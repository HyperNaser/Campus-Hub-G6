<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Review System</title>
    <link rel="stylesheet" href="Styles.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <h1>Course Reviews</h1>
            <button id="addItemBtn" class="btn btn-primary">+ Add Course</button>
        </div>
    </header>

    <main class="container">
        <div id="listingView">
            <div class="search-container">
                <div class="form-group">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search courses...">
                </div>
                <div class="filter-group">
                    <select id="filterDifficulty" class="form-control">
                        <option value="">All Levels</option>
                        <option value="very-easy">Beginner</option>
                        <option value="easy">Easy</option>
                        <option value="moderate">Intermediate</option>
                        <option value="difficult">Advanced</option>
                        <option value="very-difficult">Expert</option>
                    </select>
                    <select id="sortBy" class="form-control">
                        <option value="name-asc">A-Z</option>
                        <option value="name-desc">Z-A</option>
                        <option value="difficulty-asc">Easy to Hard</option>
                        <option value="difficulty-desc">Hard to Easy</option>
                    </select>
                </div>
            </div>

            <div id="loadingIndicator" class="loading">
                <div class="spinner"></div>
            </div>

            <div id="errorContainer" class="error-message" style="display: none;"></div>

            <div id="itemsGrid" class="grid"></div>

            <nav>
                <ul class="pagination" id="pagination"></ul>
            </nav>
        </div>

        <div id="detailView" style="display: none;">
            <button id="backToListBtn" class="btn btn-secondary">← Back</button>
            <div class="card" id="itemDetailCard">
                <div class="card-body">
                    <h2 id="detailTitle"></h2>
                    <div id="detailContent"></div>
                </div>
            </div>
            
            <div class="comments-section">
                <h3>Reviews</h3>
                <div id="commentsContainer"></div>
                <form id="commentForm">
                    <div class="form-group">
                        <textarea id="commentText" class="form-control" rows="3" placeholder="Add your review..." required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit Review</button>
                </form>
            </div>
        </div>
        <div id="createItemView" style="display: none;">
            <button id="cancelCreateBtn" class="btn btn-secondary">← Cancel</button>
            <div class="card">
                <div class="card-body">
                    <h2 id="formTitle">Add New Course</h2>
                    <form id="itemForm">
                        <div class="form-group">
                            <input type="text" id="itemName" class="form-control" placeholder="Course Name*" required>
                        </div>
                        <div class="form-group">
                            <textarea id="itemDescription" class="form-control" rows="3" placeholder="Description*" required></textarea>
                        </div>
                        <div class="form-group">
                            <select id="itemDifficulty" class="form-control" required>
                                <option value="">Select Difficulty*</option>
                                <option value="very-easy">Beginner</option>
                                <option value="easy">Easy</option>
                                <option value="moderate">Intermediate</option>
                                <option value="difficult">Advanced</option>
                                <option value="very-difficult">Expert</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select id="itemRating" class="form-control">
                                <option value="">Rating (optional)</option>
                                <option value="1">★☆☆☆☆</option>
                                <option value="2">★★☆☆☆</option>
                                <option value="3">★★★☆☆</option>
                                <option value="4">★★★★☆</option>
                                <option value="5">★★★★★</option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary">Save Course</button>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <script>
        const courses = [
            {
                id: 1,
                name: "ITCS333",
                description: "Learn the fundamentals of web development",
                difficulty: "easy",
                rating: 4,
                reviews: [
                    { id: 1, author: "John Doe", text: "Great introduction!" },
                    { id: 2, author: "HAMANI", text: "Very helpful for beginners." }
                ]
            },
            {
                id: 2,
                name: "MATHS101",
                description: "CALCULUS I",
                difficulty: "difficult",
                rating: 5,
                reviews: [
                    { id: 3, author: "JOHN SNAKE", text: "THE PAIN!" }
                ]
            },
            {
                id: 3,
                name: "ENGL155",
                description: "Complete guide to English grammer",
                difficulty: "moderate",
                rating: 4,
                reviews: []
            }
        ];

        const views = {
            listing: document.getElementById('listingView'),
            detail: document.getElementById('detailView'),
            create: document.getElementById('createItemView')
        };

        const elements = {
            grid: document.getElementById('itemsGrid'),
            loading: document.getElementById('loadingIndicator'),
            error: document.getElementById('errorContainer'),
            pagination: document.getElementById('pagination'),
            search: document.getElementById('searchInput'),
            filter: document.getElementById('filterDifficulty'),
            sort: document.getElementById('sortBy'),
            formTitle: document.getElementById('formTitle'),
            detailTitle: document.getElementById('detailTitle'),
            detailContent: document.getElementById('detailContent'),
            reviewsContainer: document.getElementById('commentsContainer')
        };

        let currentPage = 1;
        const itemsPerPage = 6;
        let filteredCourses = [...courses];

        document.addEventListener('DOMContentLoaded', initApp);

        function initApp() {
            setTimeout(() => {
                elements.loading.style.display = 'none';
                renderCourses();
                setupPagination();
            }, 800);

            document.getElementById('addItemBtn').addEventListener('click', () => showView('create'));
            document.getElementById('backToListBtn').addEventListener('click', () => showView('listing'));
            document.getElementById('cancelCreateBtn').addEventListener('click', () => showView('listing'));
            
            elements.search.addEventListener('input', filterCourses);
            elements.filter.addEventListener('change', filterCourses);
            elements.sort.addEventListener('change', sortCourses);
            
            document.getElementById('itemForm').addEventListener('submit', handleFormSubmit);
            document.getElementById('commentForm').addEventListener('submit', handleReviewSubmit);
        }

        function showView(view) {
            Object.values(views).forEach(v => v.style.display = 'none');
            views[view].style.display = 'block';
        }

        function showCourseDetail(courseId) {
            const course = courses.find(c => c.id === courseId);
            if (!course) return;

            showView('detail');
            elements.detailTitle.textContent = course.name;
            
            const difficultyMap = {
                'very-easy': ['Beginner', 'badge-very-easy'],
                'easy': ['Easy', 'badge-easy'],
                'moderate': ['Intermediate', 'badge-moderate'],
                'difficult': ['Advanced', 'badge-difficult'],
                'very-difficult': ['Expert', 'badge-very-difficult']
            };

            const [difficultyText, badgeClass] = difficultyMap[course.difficulty];
            const stars = '★'.repeat(course.rating) + '☆'.repeat(5 - course.rating);

            elements.detailContent.innerHTML = `
                <p>${course.description}</p>
                <div class="course-meta">
                    <span class="badge ${badgeClass}">${difficultyText}</span>
                    <span class="stars">${stars}</span>
                </div>
                <div class="course-actions">
                    <button class="btn btn-primary" onclick="editCourse(${course.id})">Edit</button>
                    <button class="btn btn-danger" onclick="deleteCourse(${course.id})">Delete</button>
                </div>
            `;

            renderReviews(course.reviews);
        }

        function renderCourses() {
            elements.grid.innerHTML = '';
            
            const start = (currentPage - 1) * itemsPerPage;
            const coursesToShow = filteredCourses.slice(start, start + itemsPerPage);

            if (coursesToShow.length === 0) {
                elements.grid.innerHTML = '<p class="no-results">No courses found</p>';
                return;
            }

            coursesToShow.forEach(course => {
                const difficultyMap = {
                    'very-easy': ['Beginner', 'badge-very-easy'],
                    'easy': ['Easy', 'badge-easy'],
                    'moderate': ['Intermediate', 'badge-moderate'],
                    'difficult': ['Advanced', 'badge-difficult'],
                    'very-difficult': ['Expert', 'badge-very-difficult']
                };

                const [difficultyText, badgeClass] = difficultyMap[course.difficulty];
                const stars = '★'.repeat(course.rating) + '☆'.repeat(5 - course.rating);

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-body">
                        <h3>${course.name}</h3>
                        <p>${course.description.substring(0, 80)}...</p>
                        <div class="course-meta">
                            <span class="badge ${badgeClass}">${difficultyText}</span>
                            <span class="stars">${stars}</span>
                        </div>
                        <button class="btn btn-primary" onclick="showCourseDetail(${course.id})">View Details</button>
                    </div>
                `;
                elements.grid.appendChild(card);
            });
        }

        function renderReviews(reviews) {
            elements.reviewsContainer.innerHTML = reviews.length 
                ? reviews.map(r => `
                    <div class="comment">
                        <div class="comment-author">${r.author}</div>
                        <div class="comment-text">${r.text}</div>
                    </div>
                `).join('')
                : '<p>No reviews yet. Be the first to review!</p>';
        }

        function setupPagination() {
            elements.pagination.innerHTML = '';
            const pageCount = Math.ceil(filteredCourses.length / itemsPerPage);
            if (pageCount <= 1) return;

            const createPageItem = (text, page, isActive = false) => {
                const li = document.createElement('li');
                li.className = 'page-item';
                li.innerHTML = `<a class="page-link ${isActive ? 'active' : ''}" href="#" onclick="changePage(${page})">${text}</a>`;
                return li;
            };

            if (currentPage > 1) {
                elements.pagination.appendChild(createPageItem('Previous', currentPage - 1));
            }

            for (let i = 1; i <= pageCount; i++) {
                elements.pagination.appendChild(createPageItem(i, i, i === currentPage));
            }

            if (currentPage < pageCount) {
                elements.pagination.appendChild(createPageItem('Next', currentPage + 1));
            }
        }

        function filterCourses() {
            const searchTerm = elements.search.value.toLowerCase();
            const difficultyFilter = elements.filter.value;

            elements.loading.style.display = 'flex';
            
            setTimeout(() => {
                filteredCourses = courses.filter(course => {
                    const matchesSearch = course.name.toLowerCase().includes(searchTerm) || 
                                        course.description.toLowerCase().includes(searchTerm);
                    const matchesDifficulty = !difficultyFilter || course.difficulty === difficultyFilter;
                    return matchesSearch && matchesDifficulty;
                });

                currentPage = 1;
                elements.loading.style.display = 'none';
                sortCourses();
            }, 300);
        }

        function sortCourses() {
            const sortValue = elements.sort.value;
            
            filteredCourses.sort((a, b) => {
                switch(sortValue) {
                    case 'name-asc': return a.name.localeCompare(b.name);
                    case 'name-desc': return b.name.localeCompare(a.name);
                    case 'difficulty-asc': 
                        return ['very-easy', 'easy', 'moderate', 'difficult', 'very-difficult']
                            .indexOf(a.difficulty) - ['very-easy', 'easy', 'moderate', 'difficult', 'very-difficult']
                            .indexOf(b.difficulty);
                    case 'difficulty-desc': 
                        return ['very-difficult', 'difficult', 'moderate', 'easy', 'very-easy']
                            .indexOf(a.difficulty) - ['very-difficult', 'difficult', 'moderate', 'easy', 'very-easy']
                            .indexOf(b.difficulty);
                    default: return 0;
                }
            });

            renderCourses();
            setupPagination();
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            
            const form = e.target;
            const name = form.itemName.value.trim();
            const description = form.itemDescription.value.trim();
            const difficulty = form.itemDifficulty.value;
            const rating = parseInt(form.itemRating.value) || 0;

            if (!name || !description || !difficulty) {
                alert('Please fill in all required fields');
                return;
            }

            const courseId = form.dataset.courseId;
            if (courseId) {
                const index = courses.findIndex(c => c.id === parseInt(courseId));
                if (index !== -1) {
                    courses[index] = { ...courses[index], name, description, difficulty, rating };
                }
            } else {
                courses.push({
                    id: Math.max(...courses.map(c => c.id)) + 1,
                    name,
                    description,
                    difficulty,
                    rating,
                    reviews: []
                });
            }

            filterCourses();
            showView('listing');
        }
        function handleReviewSubmit(e) {
            e.preventDefault();
            const text = e.target.commentText.value.trim();
            
            if (!text) {
                alert('Please enter your review');
                return;
            }
            const newReview = {
                id: Date.now(),
                author: "You",
                text
            };
            const courseId = elements.detailTitle.dataset.courseId;
            if (courseId) {
                const course = courses.find(c => c.id === parseInt(courseId));
                if (course) {
                    course.reviews.push(newReview);
                    renderReviews(course.reviews);
                    e.target.reset();
                }
            }
        }

        function changePage(page) {
            if (page < 1 || page > Math.ceil(filteredCourses.length / itemsPerPage)) return;
            currentPage = page;
            renderCourses();
            setupPagination();
            window.scrollTo(0, 0);
        }

        window.showCourseDetail = showCourseDetail;
        window.changePage = changePage;

        window.editCourse = function(id) {
            const course = courses.find(c => c.id === id);
            if (course) {
                showView('create');
                elements.formTitle.textContent = "Edit Course";
                document.getElementById('itemName').value = course.name;
                document.getElementById('itemDescription').value = course.description;
                document.getElementById('itemDifficulty').value = course.difficulty;
                document.getElementById('itemRating').value = course.rating;
                document.getElementById('itemForm').dataset.courseId = course.id;
            }
        };
        window.deleteCourse = function(id) {
            if (confirm('Delete this course?')) {
                const index = courses.findIndex(c => c.id === id);
                if (index !== -1) {
                    courses.splice(index, 1);
                    filterCourses();
                    showView('listing');
                }
            }
        };
    </script>
</body>
</html>

/* Hussain Ali Ahmed Ali, 202208704 */
  git config --global user.email "karmhussain200@gmail.com"
  git config --global user.name "Hussain-Ali-Ahmed"